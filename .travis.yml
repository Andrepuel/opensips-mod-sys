language: c
compiler:
  - gcc
sudo: false
env:
  global:
    - FASTER=1
    - secure: V4PmaABbjlWTUwCDYesYWZCDii2ranawCVwT7LjE4E2trfq1fbIC9Dpk4f2UFeXA3rGv/wtk57ynfVDkCpXxrDlwHd+hDNTC+jebhVBiJ6w0poJ2kQmsB2PoGFVBtcaQr3m9uVfcM8QosYWRditucjnqyPm429t0Q4h1/4V5SFY=
addons:
  apt:
    packages:
      - flex
      - bison
      - libsqlite3-dev
      - libsctp-dev
      - libradcli-dev
      - libhiredis-dev
      - unixodbc-dev
      - libconfuse-dev
      - libmysqlclient-dev
      - libexpat1-dev
      - libxml2-dev
      - libpq-dev
      - zlib1g-dev
      - libperl-dev
      - libsnmp-dev
      - libdb-dev
      - libldap2-dev
      - libcurl4-gnutls-dev
      - libgeoip-dev
      - libpcre3-dev
      - libmemcached-dev
      - libmicrohttpd-dev
      - librabbitmq-dev
      - liblua5.1-0-dev
      - libncurses5-dev
      - libjson0-dev
      - uuid-dev
#      - libjwt-dev
  coverity_scan:
    project:
      name: OpenSIPS/opensips
      version: master
      description: OpenSIPS Coverity Scan
    notification_email: razvan@opensips.org
    build_command: make exclude_modules='db_oracle osp sngtc cachedb_cassandra cachedb_couchbase cachedb_mongodb auth_jwt' all
    branch_pattern: coverity_scan
script: if [ ${COVERITY_SCAN_BRANCH} != 1 ]; then \
  CC_EXTRA_OPTS=-Werror FASTER=1 NICER=0 make \
  exclude_modules="db_oracle osp sngtc cachedb_cassandra cachedb_couchbase cachedb_mongodb auth_jwt" all; fi
